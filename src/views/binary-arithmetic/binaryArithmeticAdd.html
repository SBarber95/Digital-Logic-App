<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Sovereign Logic</title>

    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="../../css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../css/workspace.css" rel="stylesheet">

</head>

<body>

<script src="../../../node_modules/vue/dist/vue.min.js"></script>

<!-- Fixed navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <img class="icon-bar" src="../../images/Logo.svg">
            <a class="navbar-brand">Sovereign Logic</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="../../../index.html">Home</a></li>
                <li class="active"><a href="binaryArithmeticAdd.html">Binary Arithmetic</a></li>
                <li><a href="../truthTables.html">Truth Tables</a></li>
                <li><a href="../circuitDesign.html">Circuit Design</a></li>
                <li><a href="../conversions.html">Conversions</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">References<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Boolean Theorems</a></li>
                        <li><a href="#">Binary Arithmetic Rules</a></li>
                        <li><a href="#">Logic Gates</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-4 col-md-3 sidebar">
            <ul class="nav nav-sidebar">
                <li class="sub-header">Binary Arithmetic Options</li>
                <li><a href="#">Binary Addition</a></li>
                <li><a href="#">Binary Subtraction</a></li>
                <li><a href="#">Binary Multiplication</a></li>
                <li><a href="#">Binary Division</a></li>
            </ul>
            <ul class="nav nav-sidebar">
                <li class="sub-header">Additional Options</li>
                <li><a href="">Nav item again</a></li>
                <li><a href="">One more nav</a></li>
                <li><a href="">Another nav item</a></li>
                <li><a href="">More navigation</a></li>
            </ul>
            <ul class="nav nav-sidebar">
                <li><a href="">Nav item again</a></li>
                <li><a href="">One more nav</a></li>
                <li><a href="">Another nav item</a></li>
            </ul>
        </div>
        <div class="col-sm-8 col-sm-offset-4 col-md-9 col-md-offset-3 main">
            <h1 id="binary-arith-header" class="page-header">{{ message }}</h1>
            <!-- Possible Vue Component -->
            <div class="user-input-addition">
                <h2 class="sub-header">Calculator</h2>
                <form id="addition_calculator">
                    <input type="text" class="first_value" name="firstNumber" placeholder="Enter First Binary Value" required><br>
                    + <input type="text" class="second_value" name="secondNumber" placeholder="Enter Second Binary Value" required><br>
                    <p class="border"></p>
                    <input type="submit" class="btn btn-primary" name="submit" value="Calculate">
                </form>
                <p id="calculator_output_add" class="well arithmetic-output">The Answer Will Appear Here.</p>
            </div>
            <div class="addition-quiz">
                <h2 class="sub-header">Practice Problems</h2>
                <form id="addition_quiz">
                    <p>First Number: 001010</p>
                    <p>Second Number: 101100</p>
                    <p class="border"></p>
                    <input type="text" class="user_answer" name="userAnswer" placeholder="Enter Your Answer" required>
                    <input type="submit" class="btn btn-primary" name="submit" value="Check Answer">
                </form>
                <p class="well arithmetic-output">Correct Answer/Message Goes Here</p>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="../../js/bootstrap.min.js"></script>
<script src="../../js/docs.min.js"></script>

<script>

    /**
     * Arithmetic still needs error-checking for user input.
     */

    var binaryArithHeader = new Vue ({
        el: '#binary-arith-header',
        data: {
            message: 'Binary Addition',
        }
    });

    var calculatorOutput = document.getElementById("calculator_output_add");

    var calculatorForm = document.getElementById("addition_calculator");

    calculatorForm.onsubmit = function (e) {

        e.preventDefault();

        var firstNumber = calculatorForm.firstNumber.value;
        var secondNumber = calculatorForm.secondNumber.value;

        // Convert string input to arrays to prepare for arithmetic
        var firstNumberDigits = Array.from(firstNumber);
        var secondNumberDigits = Array.from(secondNumber);

        // The following loops prepend 0's to simulate a zero-extension
        // of the shorter binary value to the matched size of the longer
        // binary value to facilitate easier arithmetic
        if (firstNumberDigits.length > secondNumberDigits.length) {
            for (var i = secondNumberDigits.length; i < firstNumberDigits.length; i++) {

                secondNumberDigits.unshift('0');

            }
        }
        else if (secondNumberDigits.length > firstNumberDigits.length) {
            for (i = firstNumberDigits.length; i < secondNumberDigits.length; i++) {

                firstNumberDigits.unshift('0');

            }
        }

        var carryIn = 0;

        var answer = [];

        // Clear previous output
        calculatorOutput.innerHTML = "Answer: ";

        for (i = firstNumberDigits.length - 1; i >= 0; i--) {

            if (firstNumberDigits[i] == '0' && secondNumberDigits[i] == '0' && carryIn == 0) {
                answer.unshift('0');
                carryIn = 0;
            }
            else if ((firstNumberDigits[i] == '1' && secondNumberDigits[i] == '0' && carryIn == 0) ||
                     (firstNumberDigits[i] == '0' && secondNumberDigits[i] == '1' && carryIn == 0) ||
                     (firstNumberDigits[i] == '0' && secondNumberDigits[i] == '0' && carryIn == 1)) {
                answer.unshift('1');
                carryIn = 0;
            }
            else if ((firstNumberDigits[i] == '1' && secondNumberDigits[i] == '1' && carryIn == 0) ||
                     (firstNumberDigits[i] == '0' && secondNumberDigits[i] == '1' && carryIn == 1) ||
                     (firstNumberDigits[i] == '1' && secondNumberDigits[i] == '0' && carryIn == 1)) {
                answer.unshift('0');
                carryIn = 1;
                if (i == 0) {
                    answer.unshift('1');
                }
            }
            else if (firstNumberDigits[i] == '1' && secondNumberDigits[i] == '1' && carryIn == 1) {
                answer.unshift('1');
                carryIn = 1;
                if (i == 0) {
                    answer.unshift('1');
                }
            }

        }

        for (i = 0; i < answer.length; i++) {

            calculatorOutput.innerHTML += "" + answer[i];

        }
    };

</script>

</body>

</html>
